<div class="flex min-h-screen select-none flex-col font-sans">
  <app-header></app-header>

  @if (isLoading$ | async) {
    <p-progressBar class="progress-bar-container" mode="indeterminate" [style]="{ height: '3px' }" />
  }

  <div class="flex-1 bg-gray-100">
    <div class="container mx-auto py-6 font-sans">
      <div class="text-black">
        @if (realEstates$ | async; as realEstates) {
          <div class="grid grid-cols-12 gap-6">
            <!--Column 1-->
            <div class="col-span-9 space-y-4">
              @if (realEstates.length > 0) {
                <!--Nên để slider-->
                <p class="text- xl rounded-xl border border-solid border-gray-200 bg-white p-4 font-bold text-blue-600">Results: 4</p>
                @for (realEstate of realEstates; track realEstate.id) {
                  <div class="relative flex flex-row gap-6 rounded-xl border border-solid border-gray-200 bg-white p-6">
                    <!-- 2 Column-->
                    <div class="flex h-64 w-[600px] flex-row gap-6">
                      <!-- Column 1 -->
                      <div class="relative h-full w-2/3">
                        <img class="absolute inset-0 h-full w-full cursor-pointer object-cover duration-300" fill [ngSrc]="realEstate.thumbnail" alt="Thumbnail" (click)="openPropertyDetail(realEstate)" />
                      </div>

                      <!-- Column 2 with 2 rows -->
                      <div class="flex h-full w-1/3 flex-col gap-6">
                        <div class="relative flex-1">
                          <img class="absolute inset-0 h-full w-full cursor-pointer object-cover duration-300" fill [ngSrc]="realEstate.thumbnail" alt="Thumbnail" (click)="openPropertyDetail(realEstate)" />
                        </div>
                        <div class="relative flex-1">
                          <img class="absolute inset-0 h-full w-full cursor-pointer object-cover duration-300" fill [ngSrc]="realEstate.thumbnail" alt="Thumbnail" (click)="openPropertyDetail(realEstate)" />
                          <div class="absolute bottom-2 right-2 flex items-center gap-1 rounded bg-gray-800 p-2 font-medium text-white">
                            <span class="material-symbols-rounded">image</span>
                            <span>6</span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="flex-1">
                      <div class="mb-4">
                        <p class="mb-2 text-xl font-semibold">{{ realEstate.title }}</p>
                        <p class="text-xl font-bold">{{ realEstate.price | currency }}</p>
                      </div>
                      <div>
                        <p class="mb-4 text-gray-800">{{ realEstate.description }}</p>
                        <div class="absolute right-6 top-6">
                          <p-toggleButton [(ngModel)]="checked" onIcon="pi pi-bookmark-fill" offIcon="pi pi-bookmark" ariaLabel="Do you confirm" />
                        </div>
                      </div>

                      <div class="flex items-center">
                        <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" styleClass="mr-2" size="normal" shape="circle" />
                        <p>Alex</p>
                      </div>
                    </div>
                  </div>
                }
              } @else {
                <div class="relative">
                  <div class="absolute inset-0 top-12">
                    <p class="mb-4 text-center text-2xl font-semibold">No real estate found</p>
                  </div>
                  <img class="w-full rounded-xl object-cover" src="theme.png" alt="" />
                </div>
              }
            </div>

            <!--Column 2-->
            <div class="col-span-3 flex flex-col gap-6">
              <!--Row 1-->
              <div class="rounded-xl border border-solid border-gray-200 bg-white px-6 py-4">
                <div class="flex flex-row justify-between">
                  <div class="flex flex-row items-center gap-2">
                    <span class="material-symbols-rounded text-blue-600">tune</span>
                    <h1 class="text-2xl font-bold text-blue-600">Sort By</h1>
                  </div>
                  <p-button label="Clear Filters" icon="pi pi-times" iconPos="right" severity="secondary" [rounded]="true" size="small" (click)="clearFilters()" />
                </div>

                <hr class="my-4 border-0 border-b border-solid border-gray-300" />

                <form class="flex flex-col gap-4" [formGroup]="filterForm">
                  <!--Price-->
                  <div formGroupName="price">
                    <h2 class="mb-4 text-xl font-semibold">Price</h2>
                    <div class="flex flex-col gap-2">
                      <p-checkbox formControlName="allPrices" label="All Prices" [binary]="true" />
                      <p-checkbox formControlName="price" label="1,2000,000" value="1200000" [binary]="false" />
                      <p-checkbox formControlName="price" label="1,2000,000" value="1200000" [binary]="false" />
                    </div>
                  </div>

                  <hr class="w-full border-0 border-b border-solid border-gray-200" />

                  <!--Property type-->
                  <div formGroupName="propertyTypes">
                    <h2 class="mb-4 text-xl font-semibold">Property type</h2>
                    <div class="flex flex-row gap-4">
                      <p-checkbox formControlName="allTypes" label="All Types" [binary]="true" />
                      <p-checkbox formControlName="house" label="House" [binary]="true" />
                      <p-checkbox formControlName="apartment" label="Apartment" [binary]="true" />
                    </div>
                  </div>

                  <hr class="w-full border-0 border-b border-solid border-gray-200" />

                  <!--Area-->
                  <div formGroupName="area">
                    <h2 class="mb-4 text-xl font-semibold">Area</h2>
                    <div class="flex flex-col gap-2">
                      <p-checkbox formControlName="allAreas" label="All Areas" [binary]="true" />
                      <p-checkbox formControlName="area" label="1 2000 000 m2" [binary]="true" />
                    </div>
                  </div>

                  <hr class="w-full border-0 border-b border-solid border-gray-200" />

                  <!--bedrooms-->
                  <div formGroupName="bedrooms">
                    <h2 class="mb-4 text-xl font-semibold">Bedroom</h2>
                    <div class="mb-2 flex flex-row gap-4">
                      <div>
                        <label for="min-bedroom">Min</label>
                        <input class="mb-4 mt-2 w-full" [value]="this.filterForm.controls.bedrooms.controls.bedroomRange.value?.[0]" id="min-bedroom" type="text" pInputText #minBedroom />
                      </div>

                      <div>
                        <label for="max-bedroom">Max</label>
                        <input class="mb-4 mt-2 w-full" id="max-bedroom" type="text" pInputText #maxBedroom [value]="this.filterForm.controls.bedrooms.controls.bedroomRange.value?.[1]" />
                      </div>
                    </div>
                    <p-slider formControlName="bedroomRange" [min]="1" [max]="50" (onChange)="OnBedroomChange($event)" class="w-full" [range]="true" />
                  </div>

                  <hr class="w-full border-0 border-b border-solid border-gray-200" />

                  <!--Bathrooms-->
                  <div formGroupName="bathrooms">
                    <h2 class="mb-4 text-xl font-semibold">Bathroom</h2>
                    <div class="mb-2 flex flex-row gap-4">
                      <div>
                        <label for="min-bathroom">Min</label>
                        <input class="mb-4 mt-2 w-full" [value]="this.filterForm.controls.bathrooms.controls.bathroomRange.value?.[0]" id="min-bathroom" type="text" pInputText #minBathroom />
                      </div>

                      <div>
                        <label for="max-bathroom">Max</label>
                        <input class="mb-4 mt-2 w-full" id="max-bathroom" type="text" pInputText #maxBathroom [value]="this.filterForm.controls.bathrooms.controls.bathroomRange.value?.[1]" />
                      </div>
                    </div>

                    <p-slider formControlName="bathroomRange" [min]="1" [max]="50" (onChange)="OnBathroomChange($event)" class="w-full" [range]="true" />
                  </div>

                  <hr class="w-full border-0 border-b border-solid border-gray-200" />

                  <!--Direction-->
                  <div>
                    <h2 class="mb-4 text-xl font-semibold">Directions</h2>
                    <p-multiSelect [options]="cities" formControlName="directions" optionLabel="name" placeholder="Select Directions" />
                  </div>
                </form>
              </div>

              <!--Row 2-->
              <!--Top Agents-->
              <div class="rounded-xl border border-solid border-gray-200 bg-white px-6 py-4">
                <div>
                  <div class="relative flex items-center justify-center gap-2 rounded-xl border-0 border-b-8 border-solid border-blue-800 bg-blue-200 p-3 shadow">
                    <!--Pattern-->
                    <div class="absolute inset-0">
                      <img class="h-full w-full object-cover opacity-60" src="dotted-line.png" alt="" />
                    </div>

                    <img class="relative z-10 w-10 rounded-full bg-blue-800 object-cover p-1" src="cute-star.png" alt="" />
                    <h2 class="relative z-10 text-xl font-medium">Top Agents</h2>
                  </div>

                  <div class="mt-6 flex flex-col gap-4">
                    <div class="flex flex-row items-center justify-between gap-6 font-medium">
                      <div class="w-1/2">Username</div>
                      <div class="w-1/2 text-right">Rank</div>
                    </div>

                    <div class="flex flex-row items-center justify-between">
                      <div class="flex flex-row items-center">
                        <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" styleClass="mr-4" size="large" shape="circle" />
                        <div>
                          <p class="mb-0.5 font-medium">Donald Trump</p>
                          <p class="text-gray-700">40 listings</p>
                        </div>
                      </div>

                      <span class="text-3xl">🥇</span>
                    </div>

                    <div class="flex flex-row items-center justify-between">
                      <div class="flex flex-row items-center">
                        <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" styleClass="mr-4" size="large" shape="circle" />
                        <div>
                          <p class="mb-0.5 font-medium">Kamala Harris</p>
                          <p class="text-gray-700">40 listings</p>
                        </div>
                      </div>

                      <span class="text-3xl">🥈</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        }

        <hr class="my-8 border-0 border-b border-solid border-gray-200" />
        <!--Pagination-->
        <!--        <p-paginator (onPageChange)="onPageChange($any($event))" [first]="first" [rows]="rows" [totalRecords]="120" [rowsPerPageOptions]="[10, 20, 30]" />-->
      </div>
    </div>
  </div>

  <app-footer></app-footer>
</div>

<p-scrollTop target="window" styleClass="custom-scrolltop" [threshold]="100" icon="pi pi-arrow-up" />
